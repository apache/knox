<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       https://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Apache Knox Gateway">
      
      
      
        <link rel="canonical" href="https://knox.apache.org/book_client-details/">
      
      
        <link rel="prev" href="../knoxshell-guide/knoxshell_user_guide/">
      
      
        <link rel="next" href="../book_troubleshooting/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Discovering Resources - Apache Knox</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#client-details" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Apache Knox" class="md-header__button md-logo" aria-label="Apache Knox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apache Knox
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Discovering Resources
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quick_start/" class="md-tabs__link">
        
  
  
    
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../knoxshell-guide/knoxshell_user_guide/" class="md-tabs__link">
          
  
  
    
  
  Client/User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../knox_cli/" class="md-tabs__link">
          
  
  
    
  
  Admin Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../dev-guide/book/" class="md-tabs__link">
          
  
  
    
  
  Developer Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://github.com/apache/knox" class="md-tabs__link">
        
  
  
    
  
  GitHub

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Apache Knox" class="md-nav__button md-logo" aria-label="Apache Knox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Apache Knox
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Client/User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Client/User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knoxshell-guide/knoxshell_user_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knox Shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Discovering Resources
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Discovering Resources
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#client-details" class="md-nav__link">
    <span class="md-ellipsis">
      Client Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      Client Quickstart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-truststore-for-use-with-knoxshell-client-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Build Truststore for use with KnoxShell Client Applications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-token-sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Client Token Sessions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client Token Sessions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Server Setup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-dsl-and-sdk-details" class="md-nav__link">
    <span class="md-ellipsis">
      Client DSL and SDK Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client DSL and SDK Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      Assumptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    <span class="md-ellipsis">
      Basics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#futures" class="md-nav__link">
    <span class="md-ellipsis">
      Futures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#closures" class="md-nav__link">
    <span class="md-ellipsis">
      Closures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constructs" class="md-nav__link">
    <span class="md-ellipsis">
      Constructs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constructs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#session" class="md-nav__link">
    <span class="md-ellipsis">
      Session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientcontext" class="md-nav__link">
    <span class="md-ellipsis">
      ClientContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request" class="md-nav__link">
    <span class="md-ellipsis">
      Request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Invocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" class="md-nav__link">
    <span class="md-ellipsis">
      Response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services_1" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension" class="md-nav__link">
    <span class="md-ellipsis">
      Extension
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-service-groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Service (Groovy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-simple-command-groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Simple Command (Groovy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-complex-command-groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Complex Command (Groovy)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Groovy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../book_troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client_troubleshooting.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client-Specific Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Admin Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Admin Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../knox_cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knox CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../book_gateway-details/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gateway Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gateway Config Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_kerberos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knox Security Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_ha/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    High Availability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_mutual_authentication_ssl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mutual Auth SSL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_7" >
        
          
          <label class="md-nav__link" for="__nav_4_3_7" id="__nav_4_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Authentication Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_7">
            <span class="md-nav__icon md-icon"></span>
            Authentication Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_7_1" >
        
          
          <label class="md-nav__link" for="__nav_4_3_7_1" id="__nav_4_3_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Providers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_7_1">
            <span class="md-nav__icon md-icon"></span>
            Providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_authn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_7_1_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_7_1_2" id="__nav_4_3_7_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LDAP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_3_7_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_7_1_2">
            <span class="md-nav__icon md-icon"></span>
            LDAP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_ldap_group_lookup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP Group Lookup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_advanced_ldap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced LDAP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_ldap_authc_cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP Authentication Cache
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_pam_authn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PAM Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_preauth_sso_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre-auth SSO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_sso_cookie_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSO Cookie
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_tls_client_certificate_authentication_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TLS Client Certificate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_pac4j_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PAC4J
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_hadoop_auth_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hadoop Auth
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_7_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_7_2" id="__nav_4_3_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Services/APIs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_3_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_7_2">
            <span class="md-nav__icon md-icon"></span>
            Services/APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_knox_sso/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knox SSO
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_apikey/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Key
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_client_credentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client Credentials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_knoxauth_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knox Auth Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_knox_token/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knox Token
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_authz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_id_assertion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identity Assertion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_webappsec_provider/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web App Security
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Service-Specific Configurations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Service-Specific Configurations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_default_ha/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Default HA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_ssl_certificate_trust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSL Certificate Trust
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_avatica/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Avatica
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_cloudera_manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloudera Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_elasticsearch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Elasticsearch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_hbase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HBase
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_hive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hive
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_livy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Livy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_oozie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Oozie
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_service_test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service Test
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_solr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solr
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_storm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_webhcat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebHCat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_webhdfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebHDFS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_yarn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    YARN
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Maintenance and Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Maintenance and Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Admin UI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-guide/knox_monitoring_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metrics_logs.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics and Logs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_troubleshooting.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth_troubleshooting.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication Issues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service_troubleshooting.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service-Specific Issues
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-guide/book/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extending Knox
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Extending Knox
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extending_knox.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-guide/knoxsso_integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KnoxSSO Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-guide/custom_authn.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Admin API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-guide/knox_monitoring_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sse-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSE Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../websocket-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebSocket Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../x-forwarded-headers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    X-Forwarded Headers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/apache/knox" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#client-details" class="md-nav__link">
    <span class="md-ellipsis">
      Client Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      Client Quickstart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-truststore-for-use-with-knoxshell-client-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Build Truststore for use with KnoxShell Client Applications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#client-token-sessions" class="md-nav__link">
    <span class="md-ellipsis">
      Client Token Sessions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client Token Sessions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Server Setup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-dsl-and-sdk-details" class="md-nav__link">
    <span class="md-ellipsis">
      Client DSL and SDK Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Client DSL and SDK Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      Assumptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    <span class="md-ellipsis">
      Basics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#futures" class="md-nav__link">
    <span class="md-ellipsis">
      Futures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#closures" class="md-nav__link">
    <span class="md-ellipsis">
      Closures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constructs" class="md-nav__link">
    <span class="md-ellipsis">
      Constructs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constructs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#session" class="md-nav__link">
    <span class="md-ellipsis">
      Session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientcontext" class="md-nav__link">
    <span class="md-ellipsis">
      ClientContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      Commands
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request" class="md-nav__link">
    <span class="md-ellipsis">
      Request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Invocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response" class="md-nav__link">
    <span class="md-ellipsis">
      Response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services_1" class="md-nav__link">
    <span class="md-ellipsis">
      Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension" class="md-nav__link">
    <span class="md-ellipsis">
      Extension
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extension">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-service-groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Service (Groovy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-simple-command-groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Simple Command (Groovy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-complex-command-groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Complex Command (Groovy)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groovy" class="md-nav__link">
    <span class="md-ellipsis">
      Groovy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Discovering Resources</h1>

<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       https://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<!---
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       https://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
--->

<h2 id="client-details">Client Details<a class="headerlink" href="#client-details" title="Permanent link">&para;</a></h2>
<p>The KnoxShell release artifact provides a small footprint client environment that removes all unnecessary server dependencies, configuration, binary scripts, etc. It is comprised a couple different things that empower different sorts of users.</p>
<ul>
<li>A set of SDK type classes for providing access to Hadoop resources over HTTP</li>
<li>A Groovy based DSL for scripting access to Hadoop resources based on the underlying SDK classes</li>
<li>A KnoxShell Token based Sessions to provide a CLI SSO session for executing multiple scripts</li>
</ul>
<p>The following sections provide an overview and quickstart for the KnoxShell.</p>
<h3 id="client-quickstart">Client Quickstart<a class="headerlink" href="#client-quickstart" title="Permanent link">&para;</a></h3>
<p>The following installation and setup instructions should get you started with using the KnoxShell very quickly.</p>
<ol>
<li>
<p>Download a knoxshell-x.x.x.zip or tar file and unzip it in your preferred location <code>{GATEWAY_CLIENT_HOME}</code></p>
<div class="highlight"><pre><span></span><code>home:knoxshell-0.12.0 larry$ ls -l
total 296
-rw-r--r--@  1 larry  staff  71714 Mar 14 14:06 LICENSE
-rw-r--r--@  1 larry  staff    164 Mar 14 14:06 NOTICE
-rw-r--r--@  1 larry  staff  71714 Mar 15 20:04 README
drwxr-xr-x@ 12 larry  staff    408 Mar 15 21:24 bin
drwxr--r--@  3 larry  staff    102 Mar 14 14:06 conf
drwxr-xr-x+  3 larry  staff    102 Mar 15 12:41 logs
drwxr-xr-x@ 18 larry  staff    612 Mar 14 14:18 samples
</code></pre></div>
<table>
<thead>
<tr>
<th>Directory</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bin</td>
<td>contains the main knoxshell jar and related shell scripts</td>
</tr>
<tr>
<td>conf</td>
<td>only contains log4j config</td>
</tr>
<tr>
<td>logs</td>
<td>contains the knoxshell.log file</td>
</tr>
<tr>
<td>samples</td>
<td>has numerous examples to help you get started</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>cd <code>{GATEWAY_CLIENT_HOME}</code></p>
</li>
<li>Get/setup truststore for the target Knox instance or fronting load balancer<ul>
<li>As of 1.3.0 release you may use the KnoxShell command buildTrustStore to create the truststore. `</li>
<li>if you have access to the server you may also use the command <code>knoxcli.sh export-cert --type JKS</code></li>
<li>copy the resulting <code>gateway-client-identity.jks</code> to your user home directory</li>
</ul>
</li>
<li>Execute the an example script from the <code>{GATEWAY_CLIENT_HOME}/samples</code> directory - for instance:<ul>
<li><code>bin/knoxshell.sh samples/ExampleWebHdfsLs.groovy</code><div class="highlight"><pre><span></span><code>home:knoxshell-0.12.0 larry$ bin/knoxshell.sh samples/ExampleWebHdfsLs.groovy
Enter username: guest
Enter password:
[app-logs, apps, mapred, mr-history, tmp, user]
</code></pre></div>
</li>
</ul>
</li>
</ol>
<p>At this point, you should have seen something similar to the above output - probably with different directories listed. You should get the idea from the above. Take a look at the sample that we ran above:</p>
<div class="highlight"><pre><span></span><code>import groovy.json.JsonSlurper
import org.apache.knox.gateway.shell.Hadoop
import org.apache.knox.gateway.shell.hdfs.Hdfs

import org.apache.knox.gateway.shell.Credentials

gateway = &quot;https://localhost:8443/gateway/sandbox&quot;

credentials = new Credentials()
credentials.add(&quot;ClearInput&quot;, &quot;Enter username: &quot;, &quot;user&quot;)
                .add(&quot;HiddenInput&quot;, &quot;Enter pas&quot; + &quot;sword: &quot;, &quot;pass&quot;)
credentials.collect()

username = credentials.get(&quot;user&quot;).string()
pass = credentials.get(&quot;pass&quot;).string()

session = Hadoop.login( gateway, username, pass )

text = Hdfs.ls( session ).dir( &quot;/&quot; ).now().string
json = (new JsonSlurper()).parseText( text )
println json.FileStatuses.FileStatus.pathSuffix
session.shutdown()
</code></pre></div>
<p>Some things to note about this sample:</p>
<ol>
<li>The gateway URL is hardcoded<ul>
<li>Alternatives would be passing it as an argument to the script, using an environment variable or prompting for it with a ClearInput credential collector</li>
</ul>
</li>
<li>Credential collectors are used to gather credentials or other input from various sources. In this sample the HiddenInput and ClearInput collectors prompt the user for the input with the provided prompt text and the values are acquired by a subsequent get call with the provided name value.</li>
<li>The Hadoop.login method establishes a login session of sorts which will need to be provided to the various API classes as an argument.</li>
<li>The response text is easily retrieved as a string and can be parsed by the JsonSlurper or whatever you like</li>
</ol>
<h3 id="build-truststore-for-use-with-knoxshell-client-applications">Build Truststore for use with KnoxShell Client Applications<a class="headerlink" href="#build-truststore-for-use-with-knoxshell-client-applications" title="Permanent link">&para;</a></h3>
<p>The buildTrustStore command in KnoxShell allows remote clients that only have access to the KnoxShell install to build a local trustore from the server they intend to use. It should be understood that this mechanism is less secure than getting the cert directly from the Knox CLI - as a MITM could present you with a certificate that will be trusted when doing this remotely.</p>
<p>buildTrustStore <knox-gateway-url> - downloads the given gateway server's public certificate and builds a trust store to be used by KnoxShell
        example: knoxshell.sh buildTrustStore https://localhost:8443/</p>
<h3 id="client-token-sessions">Client Token Sessions<a class="headerlink" href="#client-token-sessions" title="Permanent link">&para;</a></h3>
<p>Building on the Quickstart above we will drill into some of the token session details here and walk through another sample.</p>
<p>Unlike the quickstart, token sessions require the server to be configured in specific ways to allow the use of token sessions/federation.</p>
<h4 id="server-setup">Server Setup<a class="headerlink" href="#server-setup" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>KnoxToken service should be added to your <code>sandbox</code> descriptor - see the [KnoxToken Configuration] (#KnoxToken+Configuration)</p>
<div class="highlight"><pre><span></span><code>&quot;services&quot;: [
  {
    &quot;name&quot;: &quot;KNOXTOKEN&quot;,
    &quot;params&quot;: {
      &quot;knox.token.ttl&quot;: &quot;36000000&quot;,
      &quot;knox.token.audiences&quot;: &quot;tokenbased&quot;,
      &quot;knox.token.target.url&quot;: &quot;https://localhost:8443/gateway/tokenbased&quot;
    }
  }
]
</code></pre></div>
</li>
<li>
<p>Include the following in the provider configuration referenced from the <code>tokenbased</code> descriptor to accept tokens as federation tokens for access to exposed resources with the <a href="#JWT+Provider">JWTProvider</a></p>
<div class="highlight"><pre><span></span><code>&quot;providers&quot;: [
  {
    &quot;role&quot;: &quot;federation&quot;,
    &quot;name&quot;: &quot;JWTProvider&quot;,
    &quot;enabled&quot;: &quot;true&quot;,
    &quot;params&quot;: {
      &quot;knox.token.audiences&quot;: &quot;tokenbased&quot;
    }
  }
]
</code></pre></div>
</li>
<li>
<p>Use the KnoxShell token commands to establish and manage your session</p>
<ul>
<li>bin/knoxshell.sh init https://localhost:8443/gateway/sandbox to acquire a token and cache in user home directory</li>
<li>bin/knoxshell.sh list to display the details of the cached token, the expiration time and optionally the target url</li>
<li>bin/knoxshell destroy to remove the cached session token and terminate the session</li>
</ul>
</li>
<li>
<p>Execute a script that can take advantage of the token credential collector and target URL</p>
<div class="highlight"><pre><span></span><code>import groovy.json.JsonSlurper
import java.util.HashMap
import java.util.Map
import org.apache.knox.gateway.shell.Credentials
import org.apache.knox.gateway.shell.KnoxSession
import org.apache.knox.gateway.shell.hdfs.Hdfs

credentials = new Credentials()
credentials.add(&quot;KnoxToken&quot;, &quot;none: &quot;, &quot;token&quot;)
credentials.collect()

token = credentials.get(&quot;token&quot;).string()

gateway = System.getenv(&quot;KNOXSHELL_TOPOLOGY_URL&quot;)
if (gateway == null || gateway.equals(&quot;&quot;)) {
  gateway = credentials.get(&quot;token&quot;).getTargetUrl()
}

println &quot;&quot;
println &quot;*****************************GATEWAY INSTANCE**********************************&quot;
println gateway
println &quot;*******************************************************************************&quot;
println &quot;&quot;

headers = new HashMap()
headers.put(&quot;Authorization&quot;, &quot;Bearer &quot; + token)

session = KnoxSession.login( gateway, headers )

if (args.length &gt; 0) {
  dir = args[0]
} else {
  dir = &quot;/&quot;
}

text = Hdfs.ls( session ).dir( dir ).now().string
json = (new JsonSlurper()).parseText( text )
statuses = json.get(&quot;FileStatuses&quot;);

println statuses

session.shutdown()
</code></pre></div>
</li>
</ol>
<p>Note the following about the above sample script:</p>
<ol>
<li>Use of the KnoxToken credential collector</li>
<li>Use of the targetUrl from the credential collector</li>
<li>Optional override of the target url with environment variable</li>
<li>The passing of the headers map to the session creation in Hadoop.login</li>
<li>The passing of an argument for the ls command for the path to list or default to "/"</li>
</ol>
<p>Also note that there is no reason to prompt for username and password as long as the token has not been destroyed or expired.
There is also no hardcoded endpoint for using the token - it is specified in the token cache or overridden by environment variable.</p>
<h2 id="client-dsl-and-sdk-details">Client DSL and SDK Details<a class="headerlink" href="#client-dsl-and-sdk-details" title="Permanent link">&para;</a></h2>
<p>The lack of any formal SDK or client for REST APIs in Hadoop led to thinking about a very simple client that could help people use and evaluate the gateway.
The list below outlines the general requirements for such a client.</p>
<ul>
<li>Promote the evaluation and adoption of the Apache Knox Gateway</li>
<li>Simple to deploy and use on data worker desktops for access to remote Hadoop clusters</li>
<li>Simple to extend with new commands both by other Hadoop projects and by the end user</li>
<li>Support the notion of a SSO session for multiple Hadoop interactions</li>
<li>Support the multiple authentication and federation token capabilities of the Apache Knox Gateway</li>
<li>Promote the use of REST APIs as the dominant remote client mechanism for Hadoop services</li>
<li>Promote the sense of Hadoop as a single unified product</li>
<li>Aligned with the Apache Knox Gateway's overall goals for security</li>
</ul>
<p>The result is a very simple DSL (<a href="http://en.wikipedia.org/wiki/Domain-specific_language">Domain Specific Language</a>) of sorts that is used via <a href="http://groovy.codehaus.org">Groovy</a> scripts.
Here is an example of a command that copies a file from the local file system to HDFS.</p>
<p><em>Note: The variables <code>session</code>, <code>localFile</code> and <code>remoteFile</code> are assumed to be defined.</em></p>
<div class="highlight"><pre><span></span><code>Hdfs.put(session).file(localFile).to(remoteFile).now()
</code></pre></div>
<p><em>This work is in very early development but is already very useful in its current state.</em>
<em>We are very interested in receiving feedback about how to improve this feature and the DSL in particular.</em></p>
<p>A note of thanks to <a href="https://code.google.com/p/rest-assured/">REST-assured</a> which provides a <a href="http://en.wikipedia.org/wiki/Fluent_interface">Fluent interface</a> style DSL for testing REST services.
It served as the initial inspiration for the creation of this DSL.</p>
<h3 id="assumptions">Assumptions<a class="headerlink" href="#assumptions" title="Permanent link">&para;</a></h3>
<p>This document assumes a few things about your environment in order to simplify the examples.</p>
<ul>
<li>The JVM is executable as simply <code>java</code>.</li>
<li>The Apache Knox Gateway is installed and functional.</li>
<li>The example commands are executed within the context of the <code>GATEWAY_HOME</code> current directory.
The <code>GATEWAY_HOME</code> directory is the directory within the Apache Knox Gateway installation that contains the README file and the bin, conf and deployments directories.</li>
<li>A few examples require the use of commands from a standard Groovy installation.  These examples are optional but to try them you will need Groovy <a href="http://groovy.codehaus.org/Installing+Groovy">installed</a>.</li>
</ul>
<h3 id="basics">Basics<a class="headerlink" href="#basics" title="Permanent link">&para;</a></h3>
<p>In order for secure connections to be made to the Knox gateway server over SSL, the user will need to trust
the certificate presented by the gateway while connecting. The knoxcli command export-cert may be used to get
access the gateway-identity cert. It can then be imported into cacerts on the client machine or put into a
keystore that will be discovered in:</p>
<ul>
<li>The user's home directory</li>
<li>In a directory specified in an environment variable: <code>KNOX_CLIENT_TRUSTSTORE_DIR</code></li>
<li>In a directory specified with the above variable with the keystore filename specified in the variable: <code>KNOX_CLIENT_TRUSTSTORE_FILENAME</code></li>
<li>Default password "changeit" or password may be specified in environment variable: <code>KNOX_CLIENT_TRUSTSTORE_PASS</code></li>
<li>Or the JSSE system property <code>javax.net.ssl.trustStore</code> can be used to specify its location</li>
</ul>
<p>The DSL requires a shell to interpret the Groovy script.
The shell can either be used interactively or to execute a script file.
To simplify use, the distribution contains an embedded version of the Groovy shell.</p>
<p>The shell can be run interactively. Use the command <code>exit</code> to exit.</p>
<div class="highlight"><pre><span></span><code>java -jar bin/shell.jar
</code></pre></div>
<p>When running interactively it may be helpful to reduce some of the output generated by the shell console.
Use the following command in the interactive shell to reduce that output.
This only needs to be done once as these preferences are persisted.</p>
<div class="highlight"><pre><span></span><code>set verbosity QUIET
set show-last-result false
</code></pre></div>
<p>Also when running interactively use the <code>exit</code> command to terminate the shell.
Using <code>^C</code> to exit can sometimes leaves the parent shell in a problematic state.</p>
<p>The shell can also be used to execute a script by passing a single filename argument.</p>
<div class="highlight"><pre><span></span><code>java -jar bin/shell.jar samples/ExampleWebHdfsPutGet.groovy
</code></pre></div>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<p>Once the shell can be launched the DSL can be used to interact with the gateway and Hadoop.
Below is a very simple example of an interactive shell session to upload a file to HDFS.</p>
<div class="highlight"><pre><span></span><code>java -jar bin/shell.jar
knox:000&gt; session = Hadoop.login( &quot;https://localhost:8443/gateway/sandbox&quot;, &quot;guest&quot;, &quot;guest-password&quot; )
knox:000&gt; Hdfs.put( session ).file( &quot;README&quot; ).to( &quot;/tmp/example/README&quot; ).now()
</code></pre></div>
<p>The <code>knox:000&gt;</code> in the example above is the prompt from the embedded Groovy console.
If you output doesn't look like this you may need to set the verbosity and show-last-result preferences as described above in the Usage section.</p>
<p>If you receive an error <code>HTTP/1.1 403 Forbidden</code> it may be because that file already exists.
Try deleting it with the following command and then try again.</p>
<div class="highlight"><pre><span></span><code>knox:000&gt; Hdfs.rm(session).file(&quot;/tmp/example/README&quot;).now()
</code></pre></div>
<p>Without using some other tool to browse HDFS it is hard to tell that this command did anything.
Execute this to get a bit more feedback.</p>
<div class="highlight"><pre><span></span><code>knox:000&gt; println &quot;Status=&quot; + Hdfs.put( session ).file( &quot;README&quot; ).to( &quot;/tmp/example/README2&quot; ).now().statusCode
Status=201
</code></pre></div>
<p>Notice that a different filename is used for the destination.
Without this an error would have resulted.
Of course the DSL also provides a command to list the contents of a directory.</p>
<div class="highlight"><pre><span></span><code>knox:000&gt; println Hdfs.ls( session ).dir( &quot;/tmp/example&quot; ).now().string
{&quot;FileStatuses&quot;:{&quot;FileStatus&quot;:[{&quot;accessTime&quot;:1363711366977,&quot;blockSize&quot;:134217728,&quot;group&quot;:&quot;hdfs&quot;,&quot;length&quot;:19395,&quot;modificationTime&quot;:1363711366977,&quot;owner&quot;:&quot;guest&quot;,&quot;pathSuffix&quot;:&quot;README&quot;,&quot;permission&quot;:&quot;644&quot;,&quot;replication&quot;:1,&quot;type&quot;:&quot;FILE&quot;},{&quot;accessTime&quot;:1363711375617,&quot;blockSize&quot;:134217728,&quot;group&quot;:&quot;hdfs&quot;,&quot;length&quot;:19395,&quot;modificationTime&quot;:1363711375617,&quot;owner&quot;:&quot;guest&quot;,&quot;pathSuffix&quot;:&quot;README2&quot;,&quot;permission&quot;:&quot;644&quot;,&quot;replication&quot;:1,&quot;type&quot;:&quot;FILE&quot;}]}}
</code></pre></div>
<p>It is a design decision of the DSL to not provide type safe classes for various request and response payloads.
Doing so would provide an undesirable coupling between the DSL and the service implementation.
It also would make adding new commands much more difficult.
See the Groovy section below for a variety capabilities and tools for working with JSON and XML to make this easy.
The example below shows the use of JsonSlurper and GPath to extract content from a JSON response.</p>
<div class="highlight"><pre><span></span><code>knox:000&gt; import groovy.json.JsonSlurper
knox:000&gt; text = Hdfs.ls( session ).dir( &quot;/tmp/example&quot; ).now().string
knox:000&gt; json = (new JsonSlurper()).parseText( text )
knox:000&gt; println json.FileStatuses.FileStatus.pathSuffix
[README, README2]
</code></pre></div>
<p><em>In the future, "built-in" methods to slurp JSON and XML may be added to make this a bit easier.</em>
<em>This would allow for the following type of single line interaction:</em></p>
<div class="highlight"><pre><span></span><code>println Hdfs.ls(session).dir(&quot;/tmp&quot;).now().json().FileStatuses.FileStatus.pathSuffix
</code></pre></div>
<p>Shell sessions should always be ended with shutting down the session.
The examples above do not touch on it but the DSL supports the simple execution of commands asynchronously.
The shutdown command attempts to ensures that all asynchronous commands have completed before existing the shell.</p>
<div class="highlight"><pre><span></span><code>knox:000&gt; session.shutdown()
knox:000&gt; exit
</code></pre></div>
<p>All of the commands above could have been combined into a script file and executed as a single line.</p>
<div class="highlight"><pre><span></span><code>java -jar bin/shell.jar samples/ExampleWebHdfsPutGet.groovy
</code></pre></div>
<p>This would be the content of that script.</p>
<div class="highlight"><pre><span></span><code>import org.apache.knox.gateway.shell.Hadoop
import org.apache.knox.gateway.shell.hdfs.Hdfs
import groovy.json.JsonSlurper

gateway = &quot;https://localhost:8443/gateway/sandbox&quot;
username = &quot;guest&quot;
password = &quot;guest-password&quot;
dataFile = &quot;README&quot;

session = Hadoop.login( gateway, username, password )
Hdfs.rm( session ).file( &quot;/tmp/example&quot; ).recursive().now()
Hdfs.put( session ).file( dataFile ).to( &quot;/tmp/example/README&quot; ).now()
text = Hdfs.ls( session ).dir( &quot;/tmp/example&quot; ).now().string
json = (new JsonSlurper()).parseText( text )
println json.FileStatuses.FileStatus.pathSuffix
session.shutdown()
exit
</code></pre></div>
<p>Notice the <code>Hdfs.rm</code> command.  This is included simply to ensure that the script can be rerun.
Without this an error would result the second time it is run.</p>
<h3 id="futures">Futures<a class="headerlink" href="#futures" title="Permanent link">&para;</a></h3>
<p>The DSL supports the ability to invoke commands asynchronously via the later() invocation method.
The object returned from the <code>later()</code> method is a <code>java.util.concurrent.Future</code> parameterized with the response type of the command.
This is an example of how to asynchronously put a file to HDFS.</p>
<div class="highlight"><pre><span></span><code>future = Hdfs.put(session).file(&quot;README&quot;).to(&quot;/tmp/example/README&quot;).later()
println future.get().statusCode
</code></pre></div>
<p>The <code>future.get()</code> method will block until the asynchronous command is complete.
To illustrate the usefulness of this however multiple concurrent commands are required.</p>
<div class="highlight"><pre><span></span><code>readmeFuture = Hdfs.put(session).file(&quot;README&quot;).to(&quot;/tmp/example/README&quot;).later()
licenseFuture = Hdfs.put(session).file(&quot;LICENSE&quot;).to(&quot;/tmp/example/LICENSE&quot;).later()
session.waitFor( readmeFuture, licenseFuture )
println readmeFuture.get().statusCode
println licenseFuture.get().statusCode
</code></pre></div>
<p>The <code>session.waitFor()</code> method will wait for one or more asynchronous commands to complete.</p>
<h3 id="closures">Closures<a class="headerlink" href="#closures" title="Permanent link">&para;</a></h3>
<p>Futures alone only provide asynchronous invocation of the command.
What if some processing should also occur asynchronously once the command is complete.
Support for this is provided by closures.
Closures are blocks of code that are passed into the <code>later()</code> invocation method.
In Groovy these are contained within <code>{}</code> immediately after a method.
These blocks of code are executed once the asynchronous command is complete.</p>
<div class="highlight"><pre><span></span><code>Hdfs.put(session).file(&quot;README&quot;).to(&quot;/tmp/example/README&quot;).later(){ println it.statusCode }
</code></pre></div>
<p>In this example the <code>put()</code> command is executed on a separate thread and once complete the <code>println it.statusCode</code> block is executed on that thread.
The <code>it</code> variable is automatically populated by Groovy and is a reference to the result that is returned from the future or <code>now()</code> method.
The future example above can be rewritten to illustrate the use of closures.</p>
<div class="highlight"><pre><span></span><code>readmeFuture = Hdfs.put(session).file(&quot;README&quot;).to(&quot;/tmp/example/README&quot;).later() { println it.statusCode }
licenseFuture = Hdfs.put(session).file(&quot;LICENSE&quot;).to(&quot;/tmp/example/LICENSE&quot;).later() { println it.statusCode }
session.waitFor( readmeFuture, licenseFuture )
</code></pre></div>
<p>Again, the <code>session.waitFor()</code> method will wait for one or more asynchronous commands to complete.</p>
<h3 id="constructs">Constructs<a class="headerlink" href="#constructs" title="Permanent link">&para;</a></h3>
<p>In order to understand the DSL there are three primary constructs that need to be understood.</p>
<h4 id="session">Session<a class="headerlink" href="#session" title="Permanent link">&para;</a></h4>
<p>This construct encapsulates the client side session state that will be shared between all command invocations.
In particular it will simplify the management of any tokens that need to be presented with each command invocation.
It also manages a thread pool that is used by all asynchronous commands which is why it is important to call one of the shutdown methods.</p>
<p>The syntax associated with this is expected to change. We expect that credentials will not need to be provided to the gateway. Rather it is expected that some form of access token will be used to initialize the session.</p>
<h4 id="clientcontext">ClientContext<a class="headerlink" href="#clientcontext" title="Permanent link">&para;</a></h4>
<p>The ClientContext encapsulates the connection parameters, such as the URL, socket timeout parameters, retry configuration and connection pool parameters.</p>
<div class="highlight"><pre><span></span><code>ClientContext context = ClientContext.with(&quot;http://localhost:8443&quot;);
context.connection().retryCount(2).requestSentRetryEnabled(false).retryIntervalMillis(1000).end();
KnoxSession session = KnoxSession.login(context);
</code></pre></div>
<ul>
<li>retryCount - how many times to retry; -1 means no retries</li>
<li>requestSentRetryEnabled - true if it's OK to retry requests that have been sent</li>
<li>retryIntervalMillis - The interval between the subsequent auto-retries when the service is unavailable</li>
</ul>
<h4 id="services">Services<a class="headerlink" href="#services" title="Permanent link">&para;</a></h4>
<p>Services are the primary extension point for adding new suites of commands.
The current built-in examples are: Hdfs, Job and Workflow.
The desire for extensibility is the reason for the slightly awkward <code>Hdfs.ls(session)</code> syntax.
Certainly something more like <code>session.hdfs().ls()</code> would have been preferred but this would prevent adding new commands easily.
At a minimum it would result in extension commands with a different syntax from the "built-in" commands.</p>
<p>The service objects essentially function as a factory for a suite of commands.</p>
<h4 id="commands">Commands<a class="headerlink" href="#commands" title="Permanent link">&para;</a></h4>
<p>Commands provide the behavior of the DSL.
They typically follow a Fluent interface style in order to allow for single line commands.
There are really three parts to each command: Request, Invocation, Response</p>
<h4 id="request">Request<a class="headerlink" href="#request" title="Permanent link">&para;</a></h4>
<p>The request is populated by all of the methods following the "verb" method and the "invoke" method.
For example in <code>Hdfs.rm(session).ls(dir).now()</code> the request is populated between the "verb" method <code>rm()</code> and the "invoke" method <code>now()</code>.</p>
<h4 id="invocation">Invocation<a class="headerlink" href="#invocation" title="Permanent link">&para;</a></h4>
<p>The invocation method controls how the request is invoked.
Currently supported synchronous and asynchronous invocation.
The <code>now()</code> method executes the request and returns the result immediately.
The <code>later()</code> method submits the request to be executed later and returns a future from which the result can be retrieved.
In addition <code>later()</code> invocation method can optionally be provided a closure to execute when the request is complete.
See the Futures and Closures sections below for additional detail and examples.</p>
<h4 id="response">Response<a class="headerlink" href="#response" title="Permanent link">&para;</a></h4>
<p>The response contains the results of the invocation of the request.
In most cases the response is a thin wrapper over the HTTP response.
In fact many commands will share a single BasicResponse type that only provides a few simple methods.</p>
<div class="highlight"><pre><span></span><code>public int getStatusCode()
public long getContentLength()
public String getContentType()
public String getContentEncoding()
public InputStream getStream()
public String getString()
public byte[] getBytes()
public void close();
</code></pre></div>
<p>Thanks to Groovy these methods can be accessed as attributes.
In the some of the examples the staticCode was retrieved for example.</p>
<div class="highlight"><pre><span></span><code>println Hdfs.put(session).rm(dir).now().statusCode
</code></pre></div>
<p>Groovy will invoke the getStatusCode method to retrieve the statusCode attribute.</p>
<p>The three methods <code>getStream()</code>, <code>getBytes()</code> and <code>getString()</code> deserve special attention.
Care must be taken that the HTTP body is fully read once and only once.
Therefore one of these methods (and only one) must be called once and only once.
Calling one of these more than once will cause an error.
Failing to call one of these methods once will result in lingering open HTTP connections.
The <code>close()</code> method may be used if the caller is not interested in reading the result body.
Most commands that do not expect a response body will call close implicitly.
If the body is retrieved via <code>getBytes()</code> or <code>getString()</code>, the <code>close()</code> method need not be called.
When using <code>getStream()</code>, care must be taken to consume the entire body otherwise lingering open HTTP connections will result.
The <code>close()</code> method may be called after reading the body partially to discard the remainder of the body.</p>
<h3 id="services_1">Services<a class="headerlink" href="#services_1" title="Permanent link">&para;</a></h3>
<p>The built-in supported client DSL for each Hadoop service can be found in the #[Service Details] section.</p>
<h3 id="extension">Extension<a class="headerlink" href="#extension" title="Permanent link">&para;</a></h3>
<p>Extensibility is a key design goal of the KnoxShell and client DSL.
There are two ways to provide extended functionality for use with the shell.
The first is to simply create Groovy scripts that use the DSL to perform a useful task.
The second is to add new services and commands.
In order to add new service and commands new classes must be written in either Groovy or Java and added to the classpath of the shell.
Fortunately there is a very simple way to add classes and JARs to the shell classpath.
The first time the shell is executed it will create a configuration file in the same directory as the JAR with the same base name and a <code>.cfg</code> extension.</p>
<div class="highlight"><pre><span></span><code>bin/shell.jar
bin/shell.cfg
</code></pre></div>
<p>That file contains both the main class for the shell as well as a definition of the classpath.
Currently that file will by default contain the following.</p>
<div class="highlight"><pre><span></span><code>main.class=org.apache.knox.gateway.shell.Shell
class.path=../lib; ../lib/*.jar; ../ext; ../ext/*.jar
</code></pre></div>
<p>Therefore to extend the shell you should copy any new service and command class either to the <code>ext</code> directory or if they are packaged within a JAR copy the JAR to the <code>ext</code> directory.
The <code>lib</code> directory is reserved for JARs that may be delivered with the product.</p>
<p>Below are samples for the service and command classes that would need to be written to add new commands to the shell.
These happen to be Groovy source files but could - with very minor changes - be Java files.
The easiest way to add these to the shell is to compile them directly into the <code>ext</code> directory.
<em>Note: This command depends upon having the Groovy compiler installed and available on the execution path.</em></p>
<div class="highlight"><pre><span></span><code>groovy -d ext -cp bin/shell.jar samples/SampleService.groovy \
    samples/SampleSimpleCommand.groovy samples/SampleComplexCommand.groovy
</code></pre></div>
<p>These source files are available in the samples directory of the distribution but are included here for convenience.</p>
<h4 id="sample-service-groovy">Sample Service (Groovy)<a class="headerlink" href="#sample-service-groovy" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>import org.apache.knox.gateway.shell.Hadoop

class SampleService {

    static String PATH = &quot;/webhdfs/v1&quot;

    static SimpleCommand simple( Hadoop session ) {
        return new SimpleCommand( session )
    }

    static ComplexCommand.Request complex( Hadoop session ) {
        return new ComplexCommand.Request( session )
    }

}
</code></pre></div>
<h4 id="sample-simple-command-groovy">Sample Simple Command (Groovy)<a class="headerlink" href="#sample-simple-command-groovy" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>import org.apache.knox.gateway.shell.AbstractRequest
import org.apache.knox.gateway.shell.BasicResponse
import org.apache.knox.gateway.shell.Hadoop
import org.apache.http.client.methods.HttpGet
import org.apache.http.client.utils.URIBuilder

import java.util.concurrent.Callable

class SimpleCommand extends AbstractRequest&lt;BasicResponse&gt; {

    SimpleCommand( Hadoop session ) {
        super( session )
    }

    private String param
    SimpleCommand param( String param ) {
        this.param = param
        return this
    }

    @Override
    protected Callable&lt;BasicResponse&gt; callable() {
        return new Callable&lt;BasicResponse&gt;() {
            @Override
            BasicResponse call() {
                URIBuilder uri = uri( SampleService.PATH, param )
                addQueryParam( uri, &quot;op&quot;, &quot;LISTSTATUS&quot; )
                HttpGet get = new HttpGet( uri.build() )
                return new BasicResponse( execute( get ) )
            }
        }
    }

}
</code></pre></div>
<h4 id="sample-complex-command-groovy">Sample Complex Command (Groovy)<a class="headerlink" href="#sample-complex-command-groovy" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>import com.jayway.jsonpath.JsonPath
import org.apache.knox.gateway.shell.AbstractRequest
import org.apache.knox.gateway.shell.BasicResponse
import org.apache.knox.gateway.shell.Hadoop
import org.apache.http.HttpResponse
import org.apache.http.client.methods.HttpGet
import org.apache.http.client.utils.URIBuilder

import java.util.concurrent.Callable

class ComplexCommand {

    static class Request extends AbstractRequest&lt;Response&gt; {

        Request( Hadoop session ) {
            super( session )
        }

        private String param;
        Request param( String param ) {
            this.param = param;
            return this;
        }

        @Override
        protected Callable&lt;Response&gt; callable() {
            return new Callable&lt;Response&gt;() {
                @Override
                Response call() {
                    URIBuilder uri = uri( SampleService.PATH, param )
                    addQueryParam( uri, &quot;op&quot;, &quot;LISTSTATUS&quot; )
                    HttpGet get = new HttpGet( uri.build() )
                    return new Response( execute( get ) )
                }
            }
        }

    }

    static class Response extends BasicResponse {

        Response(HttpResponse response) {
            super(response)
        }

        public List&lt;String&gt; getNames() {
            return JsonPath.read( string, &quot;\$.FileStatuses.FileStatus[*].pathSuffix&quot; )
        }

    }

}
</code></pre></div>
<h3 id="groovy">Groovy<a class="headerlink" href="#groovy" title="Permanent link">&para;</a></h3>
<p>The shell included in the distribution is basically an unmodified packaging of the Groovy shell.
The distribution does however provide a wrapper that makes it very easy to setup the class path for the shell.
In fact the JARs required to execute the DSL are included on the class path by default.
Therefore these command are functionally equivalent if you have Groovy installed.
See below for a description of what is required for JARs required by the DSL from <code>lib</code> and <code>dep</code> directories.</p>
<div class="highlight"><pre><span></span><code>java -jar bin/shell.jar samples/ExampleWebHdfsPutGet.groovy
groovy -classpath {JARs required by the DSL from lib and dep} samples/ExampleWebHdfsPutGet.groovy
</code></pre></div>
<p>The interactive shell isn't exactly equivalent.
However the only difference is that the shell.jar automatically executes some additional imports that are useful for the KnoxShell client DSL.
So these two sets of commands should be functionality equivalent.
<em>However there is currently a class loading issue that prevents the groovysh command from working properly.</em></p>
<div class="highlight"><pre><span></span><code>java -jar bin/shell.jar

groovysh -classpath {JARs required by the DSL from lib and dep}
import org.apache.knox.gateway.shell.Hadoop
import org.apache.knox.gateway.shell.hdfs.Hdfs
import org.apache.knox.gateway.shell.job.Job
import org.apache.knox.gateway.shell.workflow.Workflow
import java.util.concurrent.TimeUnit
</code></pre></div>
<p>Alternatively, you can use the Groovy Console which does not appear to have the same class loading issue.</p>
<div class="highlight"><pre><span></span><code>groovyConsole -classpath {JARs required by the DSL from lib and dep}

import org.apache.knox.gateway.shell.Hadoop
import org.apache.knox.gateway.shell.hdfs.Hdfs
import org.apache.knox.gateway.shell.job.Job
import org.apache.knox.gateway.shell.workflow.Workflow
import java.util.concurrent.TimeUnit
</code></pre></div>
<p>The JARs currently required by the client DSL are</p>
<div class="highlight"><pre><span></span><code>lib/gateway-shell-{GATEWAY_VERSION}.jar
dep/httpclient-4.3.6.jar
dep/httpcore-4.3.3.jar
dep/commons-lang3-3.4.jar
dep/commons-codec-1.7.jar
</code></pre></div>
<p>So on Linux/MacOS you would need this command</p>
<div class="highlight"><pre><span></span><code>groovy -cp lib/gateway-shell-0.10.0.jar:dep/httpclient-4.3.6.jar:dep/httpcore-4.3.3.jar:dep/commons-lang3-3.4.jar:dep/commons-codec-1.7.jar samples/ExampleWebHdfsPutGet.groovy
</code></pre></div>
<p>and on Windows you would need this command</p>
<div class="highlight"><pre><span></span><code>groovy -cp lib/gateway-shell-0.10.0.jar;dep/httpclient-4.3.6.jar;dep/httpcore-4.3.3.jar;dep/commons-lang3-3.4.jar;dep/commons-codec-1.7.jar samples/ExampleWebHdfsPutGet.groovy
</code></pre></div>
<p>The exact list of required JARs is likely to change from release to release so it is recommended that you utilize the wrapper <code>bin/shell.jar</code>.</p>
<p>In addition because the DSL can be used via standard Groovy, the Groovy integrations in many popular IDEs (e.g. IntelliJ, Eclipse) can also be used.
This makes it particularly nice to develop and execute scripts to interact with Hadoop.
The code-completion features in modern IDEs in particular provides immense value.
All that is required is to add the <code>gateway-shell-{GATEWAY_VERSION}.jar</code> to the projects class path.</p>
<p>There are a variety of Groovy tools that make it very easy to work with the standard interchange formats (i.e. JSON and XML).
In Groovy the creation of XML or JSON is typically done via a "builder" and parsing done via a "slurper".
In addition once JSON or XML is "slurped" the GPath, an XPath like feature build into Groovy can be used to access data.</p>
<ul>
<li>XML<ul>
<li>Markup Builder <a href="http://groovy.codehaus.org/Creating+XML+using+Groovy's+MarkupBuilder">Overview</a>, <a href="http://groovy.codehaus.org/api/groovy/xml/MarkupBuilder.html">API</a></li>
<li>XML Slurper <a href="http://groovy.codehaus.org/Reading+XML+using+Groovy's+XmlSlurper">Overview</a>, <a href="http://groovy.codehaus.org/api/groovy/util/XmlSlurper.html">API</a></li>
<li>XPath <a href="http://groovy.codehaus.org/GPath">Overview</a>, <a href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/XPath.html">API</a></li>
</ul>
</li>
<li>JSON<ul>
<li>JSON Builder <a href="http://groovy.codehaus.org/gapi/groovy/json/JsonBuilder.html">API</a></li>
<li>JSON Slurper <a href="http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html">API</a></li>
<li>JSON Path <a href="https://code.google.com/p/json-path/">API</a></li>
<li>GPath <a href="http://groovy.codehaus.org/GPath">Overview</a></li>
</ul>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "search.highlight", "search.share", "toc.follow", "content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>
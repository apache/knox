{"ast":null,"code":"import _toConsumableArray from \"/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { map } from '../operators/map';\nimport { isObject } from '../util/isObject';\nimport { from } from './from';\nexport function forkJoin() {\n  for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  if (sources.length === 1) {\n    var first = sources[0];\n\n    if (isArray(first)) {\n      return forkJoinInternal(first, null);\n    }\n\n    if (isObject(first) && Object.getPrototypeOf(first) === Object.prototype) {\n      var keys = Object.keys(first);\n      return forkJoinInternal(keys.map(function (key) {\n        return first[key];\n      }), keys);\n    }\n  }\n\n  if (typeof sources[sources.length - 1] === 'function') {\n    var resultSelector = sources.pop();\n    sources = sources.length === 1 && isArray(sources[0]) ? sources[0] : sources;\n    return forkJoinInternal(sources, null).pipe(map(function (args) {\n      return resultSelector.apply(void 0, _toConsumableArray(args));\n    }));\n  }\n\n  return forkJoinInternal(sources, null);\n}\n\nfunction forkJoinInternal(sources, keys) {\n  return new Observable(function (subscriber) {\n    var len = sources.length;\n\n    if (len === 0) {\n      subscriber.complete();\n      return;\n    }\n\n    var values = new Array(len);\n    var completed = 0;\n    var emitted = 0;\n\n    var _loop = function _loop(i) {\n      var source = from(sources[i]);\n      var hasValue = false;\n      subscriber.add(source.subscribe({\n        next: function next(value) {\n          if (!hasValue) {\n            hasValue = true;\n            emitted++;\n          }\n\n          values[i] = value;\n        },\n        error: function error(err) {\n          return subscriber.error(err);\n        },\n        complete: function complete() {\n          completed++;\n\n          if (completed === len || !hasValue) {\n            if (emitted === len) {\n              subscriber.next(keys ? keys.reduce(function (result, key, i) {\n                return result[key] = values[i], result;\n              }, {}) : values);\n            }\n\n            subscriber.complete();\n          }\n        }\n      }));\n    };\n\n    for (var i = 0; i < len; i++) {\n      _loop(i);\n    }\n  });\n}","map":{"version":3,"sources":["/Users/mbalazs/projects/knox/knox-homepage-ui/node_modules/rxjs/_esm2015/internal/observable/forkJoin.js"],"names":["Observable","isArray","map","isObject","from","forkJoin","sources","length","first","forkJoinInternal","Object","getPrototypeOf","prototype","keys","key","resultSelector","pop","pipe","args","subscriber","len","complete","values","Array","completed","emitted","i","source","hasValue","add","subscribe","next","value","error","err","reduce","result"],"mappings":";AAAA,SAASA,UAAT,QAA2B,eAA3B;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,GAAT,QAAoB,kBAApB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,OAAO,SAASC,QAAT,GAA8B;AAAA,oCAATC,OAAS;AAATA,IAAAA,OAAS;AAAA;;AACjC,MAAIA,OAAO,CAACC,MAAR,KAAmB,CAAvB,EAA0B;AACtB,QAAMC,KAAK,GAAGF,OAAO,CAAC,CAAD,CAArB;;AACA,QAAIL,OAAO,CAACO,KAAD,CAAX,EAAoB;AAChB,aAAOC,gBAAgB,CAACD,KAAD,EAAQ,IAAR,CAAvB;AACH;;AACD,QAAIL,QAAQ,CAACK,KAAD,CAAR,IAAmBE,MAAM,CAACC,cAAP,CAAsBH,KAAtB,MAAiCE,MAAM,CAACE,SAA/D,EAA0E;AACtE,UAAMC,IAAI,GAAGH,MAAM,CAACG,IAAP,CAAYL,KAAZ,CAAb;AACA,aAAOC,gBAAgB,CAACI,IAAI,CAACX,GAAL,CAAS,UAAAY,GAAG;AAAA,eAAIN,KAAK,CAACM,GAAD,CAAT;AAAA,OAAZ,CAAD,EAA8BD,IAA9B,CAAvB;AACH;AACJ;;AACD,MAAI,OAAOP,OAAO,CAACA,OAAO,CAACC,MAAR,GAAiB,CAAlB,CAAd,KAAuC,UAA3C,EAAuD;AACnD,QAAMQ,cAAc,GAAGT,OAAO,CAACU,GAAR,EAAvB;AACAV,IAAAA,OAAO,GAAIA,OAAO,CAACC,MAAR,KAAmB,CAAnB,IAAwBN,OAAO,CAACK,OAAO,CAAC,CAAD,CAAR,CAAhC,GAAgDA,OAAO,CAAC,CAAD,CAAvD,GAA6DA,OAAvE;AACA,WAAOG,gBAAgB,CAACH,OAAD,EAAU,IAAV,CAAhB,CAAgCW,IAAhC,CAAqCf,GAAG,CAAC,UAACgB,IAAD;AAAA,aAAUH,cAAc,MAAd,4BAAkBG,IAAlB,EAAV;AAAA,KAAD,CAAxC,CAAP;AACH;;AACD,SAAOT,gBAAgB,CAACH,OAAD,EAAU,IAAV,CAAvB;AACH;;AACD,SAASG,gBAAT,CAA0BH,OAA1B,EAAmCO,IAAnC,EAAyC;AACrC,SAAO,IAAIb,UAAJ,CAAe,UAAAmB,UAAU,EAAI;AAChC,QAAMC,GAAG,GAAGd,OAAO,CAACC,MAApB;;AACA,QAAIa,GAAG,KAAK,CAAZ,EAAe;AACXD,MAAAA,UAAU,CAACE,QAAX;AACA;AACH;;AACD,QAAMC,MAAM,GAAG,IAAIC,KAAJ,CAAUH,GAAV,CAAf;AACA,QAAII,SAAS,GAAG,CAAhB;AACA,QAAIC,OAAO,GAAG,CAAd;;AARgC,+BASvBC,CATuB;AAU5B,UAAMC,MAAM,GAAGvB,IAAI,CAACE,OAAO,CAACoB,CAAD,CAAR,CAAnB;AACA,UAAIE,QAAQ,GAAG,KAAf;AACAT,MAAAA,UAAU,CAACU,GAAX,CAAeF,MAAM,CAACG,SAAP,CAAiB;AAC5BC,QAAAA,IAAI,EAAE,cAAAC,KAAK,EAAI;AACX,cAAI,CAACJ,QAAL,EAAe;AACXA,YAAAA,QAAQ,GAAG,IAAX;AACAH,YAAAA,OAAO;AACV;;AACDH,UAAAA,MAAM,CAACI,CAAD,CAAN,GAAYM,KAAZ;AACH,SAP2B;AAQ5BC,QAAAA,KAAK,EAAE,eAAAC,GAAG;AAAA,iBAAIf,UAAU,CAACc,KAAX,CAAiBC,GAAjB,CAAJ;AAAA,SARkB;AAS5Bb,QAAAA,QAAQ,EAAE,oBAAM;AACZG,UAAAA,SAAS;;AACT,cAAIA,SAAS,KAAKJ,GAAd,IAAqB,CAACQ,QAA1B,EAAoC;AAChC,gBAAIH,OAAO,KAAKL,GAAhB,EAAqB;AACjBD,cAAAA,UAAU,CAACY,IAAX,CAAgBlB,IAAI,GAChBA,IAAI,CAACsB,MAAL,CAAY,UAACC,MAAD,EAAStB,GAAT,EAAcY,CAAd;AAAA,uBAAqBU,MAAM,CAACtB,GAAD,CAAN,GAAcQ,MAAM,CAACI,CAAD,CAApB,EAAyBU,MAA9C;AAAA,eAAZ,EAAmE,EAAnE,CADgB,GAEhBd,MAFJ;AAGH;;AACDH,YAAAA,UAAU,CAACE,QAAX;AACH;AACJ;AAnB2B,OAAjB,CAAf;AAZ4B;;AAShC,SAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,GAApB,EAAyBM,CAAC,EAA1B,EAA8B;AAAA,YAArBA,CAAqB;AAwB7B;AACJ,GAlCM,CAAP;AAmCH","sourcesContent":["import { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { map } from '../operators/map';\nimport { isObject } from '../util/isObject';\nimport { from } from './from';\nexport function forkJoin(...sources) {\n    if (sources.length === 1) {\n        const first = sources[0];\n        if (isArray(first)) {\n            return forkJoinInternal(first, null);\n        }\n        if (isObject(first) && Object.getPrototypeOf(first) === Object.prototype) {\n            const keys = Object.keys(first);\n            return forkJoinInternal(keys.map(key => first[key]), keys);\n        }\n    }\n    if (typeof sources[sources.length - 1] === 'function') {\n        const resultSelector = sources.pop();\n        sources = (sources.length === 1 && isArray(sources[0])) ? sources[0] : sources;\n        return forkJoinInternal(sources, null).pipe(map((args) => resultSelector(...args)));\n    }\n    return forkJoinInternal(sources, null);\n}\nfunction forkJoinInternal(sources, keys) {\n    return new Observable(subscriber => {\n        const len = sources.length;\n        if (len === 0) {\n            subscriber.complete();\n            return;\n        }\n        const values = new Array(len);\n        let completed = 0;\n        let emitted = 0;\n        for (let i = 0; i < len; i++) {\n            const source = from(sources[i]);\n            let hasValue = false;\n            subscriber.add(source.subscribe({\n                next: value => {\n                    if (!hasValue) {\n                        hasValue = true;\n                        emitted++;\n                    }\n                    values[i] = value;\n                },\n                error: err => subscriber.error(err),\n                complete: () => {\n                    completed++;\n                    if (completed === len || !hasValue) {\n                        if (emitted === len) {\n                            subscriber.next(keys ?\n                                keys.reduce((result, key, i) => (result[key] = values[i], result), {}) :\n                                values);\n                        }\n                        subscriber.complete();\n                    }\n                }\n            }));\n        }\n    });\n}\n"]},"metadata":{},"sourceType":"module"}